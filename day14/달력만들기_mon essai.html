<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>달력만들기</title>
<style>
#wrapper{
	width:724px;
	height:800px;
	border:1px solid red;
	margin:auto;
}
#up{
	width:100%;
	height:40px;
	background:#99ffcc;
}
#dayTitle{
	width:100%;
	height:30px;
	background:#ffcc99;
}
ul{
	list-style:none;
	width:100%;
} 
ul li{
	float:left;
	width:100px;
}
</style>
<script src="../lib/lib.js"></script>
<script src="../lib/Datebox_mon essai.js"></script>
<script>
var down;
var sel_yy;
var sel_mm;
var sel_dd;
var dayName=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"];

window.addEventListener("load", function(){
	init();
});	

function init(){
	down=document.getElementById("down");

	sel_yy=document.getElementById("sel_yy");
	sel_mm=document.getElementById("sel_mm");
	sel_dd=document.getElementById("sel_dd");
	
	//년도 생성 
	for(var i=1990; i<=2030;i++){
		var op=document.createElement("option");
		op.text=i;
		sel_yy.add(op);
	}
	//월 생성 
	for(var i=1; i<=12;i++){
		var op=document.createElement("option");
		op.text=i;
		sel_mm.add(op);
	}

	//최대 42개의 날짜 박스를 생성한다!!
	/*for(var i=1;i<=42;i++){
		var box = new Datebox(down, 100,100,i);
		box.init();
	}*/
	createBox();
}
//기존에 출력된 달력을 모두 지운다!!
function deleteBox(){
	down.innerText="";
}

//달력 생성 
function createBox(){
	//현재 select박스에 선택한 값에 의한 날짜 정보 셋팅!!

	var d=new Date(sel_yy.value+"-"+sel_mm.value+"-1");//해당년월의1일
	console.log(d);

	//console.log(d.getDay()
	//+"번째는"+dayName[d.getDay()]);

	//해당월이 며칠까지있나?
	//d.setDate();
	//d.setDate(5);//해당 년월의 5일로 놓는다.
	//console.log(d);

	//d.setDate(0);//전달의 마지막날!!



	//최대 42개의 날짜 박스를 생성한다!!
	//alert(new Date("2016-2-29"));

	var n=0;
	var lastDate=getLastDate(sel_yy.value, sel_mm.value);//보여지는날짜보다-1 왜? 월은 0부터 시작하니깐...
	//d.setDate(0);//이전달의 마지막날로셋팅한다.
	//d.setDate(1);
	//var lastDate=d.getDate();
	//console.log("이전달의 마지막 날짜는"+lastDate);

	for(var i=1;i<=42;i++){
		if( i>d.getDay() && n<lastDate){//해당 요일의 인덱스부터날짜를 증가시킨다.
			n++;
			var box = new DateBox(down, 100,100,n);
			box.init();
		}else{
			var box = new DateBox(down, 100,100,"");
			box.init();
		
		}

		

		
	}
}

//down 영역에 선택한 날짜에 해당하는 달력이 출력!!
function showCal(){
	var d = new Date(); //날짜...오늘
	//console.log(d);
	/*
	d.setFullYear(2015);
	console.log(d);
	console.log(d.getDay());
	deleteBox(); //기존꺼 지우고
	createBox(); //새로 생성
	*/
}
/*
//기존에 출력된 달력을 모두 지운다!!
function deleteBox(){
	down.showCal("");
	down.innerText="";
}

function deleteBox

//down 영역에 선택한 날짜에 해당하는 달력이 출력!!
function createBox(){
	for(var i=0;i<=42;i++){
		var box =new DateBox()

	}

}*/
</script>
</head>
<body>
<div id="wrapper">
	<div id="up">
		<select id="sel_yy"></select>년도
		<select id="sel_mm"></select>월
		<input type="button" value="검색" onClick="showCal()">
	</div>
	<div id="dayTitle">
		<ul>
			<li>일</li>
			<li>월</li>
			<li>화</li>
			<li>수</li>
			<li>목</li>
			<li>금</li>
			<li>토</li>
		</ul>
	</div>
	<div id="down"></div>
</div>
</body>
</html>

